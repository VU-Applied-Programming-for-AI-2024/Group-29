<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="style.css">

    <title>MYTEAM</title>

    <script>
        function handleSubmit(event) {
            event.preventDefault(); 

            const sport = document.getElementById('sport').value;
            const league = document.getElementById('league').value;
            const team = document.getElementById('team').value;
            const custom = document.getElementById('customNotification').value; 
            const email = document.getElementById('email').value; 
            document.getElementById('message').innerText = "Thank you for signing up! Excited?";

            const formData = {
                sport: sport,
                league: league,
                team: team,
                custom: custom,
                email: email
            };

            fetch('/api/submit', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(formData)
            })
            .then(response => response.json())
            .then(data => {
                console.log(data);
                document.getElementById('message').innerText = data.message; 
            })
            .catch(error => {
                console.error('Error:', error);
            });
        }
            
        function updateTeams() {
            const league = document.getElementById('league').value;
            const teamsDropdown = document.getElementById('team');
            const customNotificationDiv = document.getElementById('customNotificationDiv');
            const customDropdown = document.getElementById('customNotification'); 

            const teamsByLeague = {
                "EPL": [
                    { value: 57, text: "Arsenal" },
                    { value: "aston-villa", text: "Aston Villa" },
                    { value: "bournemouth", text: "Bournemouth" },
                    { value: "brentford", text: "Brentford" },
                    { value: "brighton", text: "Brighton & Hove Albion" },
                    { value: "burnley", text: "Burnley" },
                    { value: "chelsea", text: "Chelsea" },
                    { value: "crystal-palace", text: "Crystal Palace" },
                    { value: "everton", text: "Everton" },
                    { value: "fulham", text: "Fulham" },
                    { value: "liverpool", text: "Liverpool" },
                    { value: "luton-town", text: "Luton Town" },
                    { value: 65, text: "Manchester City" },
                    { value: 66, text: "Manchester United" },
                    { value: 67, text: "Newcastle United" },
                    { value: "nottingham-forest", text: "Nottingham Forest" },
                    { value: "sheffield-united", text: "Sheffield United" },
                    { value: "tottenham-hotspur", text: "Tottenham Hotspur" },
                    { value: "west-ham-united", text: "West Ham United" },
                    { value: "wolverhampton-wanderers", text: "Wolverhampton Wanderers" }
                ],
                "La Liga": [
                    { value: "real-madrid", text: "Real Madrid" },
                    { value: "barcelona", text: "Barcelona" },
                    { value: "atletico-madrid", text: "Atletico Madrid" },
                    { value: "valencia", text: "Valencia" },
                    { value: "sevilla", text: "Sevilla" }
                ]
            };

            teamsDropdown.innerHTML = "";
            if (teamsByLeague[league]) {
                teamsByLeague[league].forEach(function(team) {
                    const option = new Option(team.text, team.value);
                    teamsDropdown.add(option);
                });
            }

            if (league) {
                customNotificationDiv.style.display = "block";
            } else {
                customNotificationDiv.style.display = "none";
            }

            document.getElementById('placeholderLabel').innerText = league;
        }
    </script>
</head>
<body>
    <h1>MYTEAM: for the fans</h1>

    <form onsubmit="handleSubmit(event)">
        <main>
            <nav class = 'navbar'>
                <ul>
                    
                </ul>
            </nav>
            <h2></h2>
        </main>
        <body>
            <h3>     </h3>
            <form id="subscriptionForm">
                <div id="step1">
                    <label for="sport">Select Sport:</label>
                    <select id="sport" name="sport" required>
                        <option value="">Select a sport</option>
                        <option value="soccer">Soccer</option>
                    </select>
                </div>
        
                <div id="step2" >
                    <label for="league">Select Soccer League (Top 5):</label>
                    <select id="league" name="league" required>
                        <option value="">Select a league</option>
                        <option value="premier-league">Premier League</option>
        
                    </select>
        
                </div>
        
                <div id="step3" >
                    <label for="team">Select Team:</label>
                    <select id="team" name="team" required>
                        <option value="Man City">Man City</option>
                        <option value="Liverpool">Liverpool</option>
                        <option value="Arsenal">Arsenal</option>
                        <option value="Aston Villa">Aston Villa</option>
                        <option value="Tottenham">Tottenham</option>
                        <option value="Chelsea">Chelsea</option>
                        <option value="Newcastle">Newcastle</option>
                        <option value="Man Utd">Man Utd</option>
                        <option value="West Ham">West Ham</option>
                        <option value="Crystal Palace">Crystal Palace</option>
                        <option value="Brighton">Brighton</option>
                        <option value="Bournemouth">Bournemouth</option>
                        <option value="Fulham">Fulham</option>
                        <option value="Wolverhampton">Wolverhampton</option>
                        <option value="Everton">Everton</option>
                        <option value="Brentfors">Brentford</option>
                        <option value="Forest">Forest</option>
                        <option value="Luton">Luton</option>
                        <option value="Burnley">Burnley</option>
                        <option value="Sheff Utd">Sheff Utd</option>
                    </select>
        
                </div>
        
                <div id="step4">
                    <label for="emailFrequency">When do you want to receive emails? When my team plays against the: </label>
                    <select id="emailFrequency" name="emailFrequency" required>
                        <option value="">Select frequency</option>
                        <option value="daily">Top 3</option>
                        <option value="weekly">Top 5</option>
                        <option value="monthly">Top 10</option>
                    </select>
        
                </div>
        
                <div id="step5">
                    <label>
                        <input type="checkbox" id="emailSubscription" name="emailSubscription" required>
                        I want to receive emails about the top teams.
                    </label>
                    <label for="email">Email:</label>
                    <input type="email" id="email" name="email">
                    <button type="button" onclick="handleSubmit(event)">
                    <input type="submit" value="Submit">
                    <p id="message"></p>
                </div>
            </form>
        
            <script src="script.js"></script>
            
        </body>
        </html>
        